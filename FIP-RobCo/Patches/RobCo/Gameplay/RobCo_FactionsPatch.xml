<?xml version="1.0" encoding="utf-8"?>
<Patch>
    <!-- AncientComplex_Mechanitor -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/SitePartDef[defName="AncientComplex_Mechanitor"]/label</xpath>
        <value>
            <label>Ancient RobCo Factory</label>
        </value>
    </Operation>
    <!-- Patch ShuttleCrashed_Exitable_Mechanitor label and description -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="ShuttleCrashed_Exitable_Mechanitor"]/label</xpath>
        <value>
            <label>Vertibird crash site</label>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="ShuttleCrashed_Exitable_Mechanitor"]/description</xpath>
        <value>
            <description>The crash site of a Vertibird, possibly containing valuable robotics salvage and pre-war technology.</description>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/SitePartDef[defName="AncientComplex_Mechanitor"]/description</xpath>
        <value>
            <description>An ancient RobCo facility filled with pre-war robotics technology and secrets. Might contain a useable Pipboy.</description>
        </value>
    </Operation>
    <!-- ShuttleCrashing_Mechanitor -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="ShuttleCrashing_Mechanitor"]/label</xpath>
        <value>
            <label>Vertibot crash site</label>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="ShuttleCrashing_Mechanitor"]/description</xpath>
        <value>
            <description>The crash site of a Vertibot, possibly containing valuable robotics salvage.</description>
        </value>
    </Operation>
    <!-- Ship_ShuttleCrashing_Mechanitor -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/TransportShipDef[defName="Ship_ShuttleCrashing_Mechanitor"]/label</xpath>
        <value>
            <label>Vertibot crash site</label>
        </value>
    </Operation>
    <!--Mechanoid (Faction)-->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/FactionDef[defName="Mechanoid"]/label</xpath>
        <value>
            <label>Mechanist</label>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/FactionDef[defName="Mechanoid"]/description</xpath>
        <value>
            <description>Crafted from the remnants of a lost age, the Mechanist commands legions of cold steel and gears. With an unyielding devotion to technology, they seek to build a new order where machines reign supreme, and flesh is secondary. Their creations march endlessly â€” silent, relentless, perfect.</description>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>/Defs/FactionDef[defName="Mechanoid"]/pawnSingular</xpath>
        <value>
            <pawnSingular>Robot</pawnSingular>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>/Defs/FactionDef[defName="Mechanoid"]/pawnsPlural</xpath>
        <value>
            <pawnsPlural>Robots</pawnsPlural>
        </value>
    </Operation>
    <!-- Patch MechanitorShip questDescription -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/QuestScriptDef[defName="MechanitorShip"]/questDescriptionRules/rulesStrings/li[contains(text(),
			'questDescription->')]</xpath>
        <value>
            <li>questDescription->You have decrypted an ancient RobCo transponder, revealing the location of a Vertibot ship in orbit. The ship is badly damaged, but you can signal it to land nearby.

The Vertibird contains the remains of a long-dead RobCo mechanic. Mechanics can create and control robots for work and combat. By extracting the deceased mechanic's Pipboy, you can turn one of your own colonists into a mechanic. Beware - the ship also contains hostile RobCo robots. The robot group is composed of:

[mechList]</li>
        </value>
    </Operation>
    <!-- Patch MechanitorShip mechGroups to spawn Robots instead of mechs only -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/QuestScriptDef[defName="MechanitorShip"]/root/mechGroups</xpath>
        <value>
            <mechGroups>
                <li>
                    <options>
                        <li>
                            <pawnKind>RobCo_Protectron</pawnKind>
                            <weight>1</weight>
                            <requireOneOf>true</requireOneOf>
                        </li>
                        <li>
                            <pawnKind>RobCo_Eyebot</pawnKind>
                            <weight>2</weight>
                        </li>
                    </options>
                </li>
                <li>
                    <options>
                        <li>
                            <pawnKind>RobCo_Cyberdog</pawnKind>
                            <weight>1</weight>
                            <requireOneOf>true</requireOneOf>
                        </li>
                        <li>
                            <pawnKind>RobCo_Eyebot</pawnKind>
                            <weight>2</weight>
                        </li>
                    </options>
                </li>
                <li>
                        <options>
                        <li>
                            <pawnKind>RobCo_MisterGutsy</pawnKind>
                            <weight>1</weight>
                            <requireOneOf>true</requireOneOf>
                        </li>
                        <li>
                            <pawnKind>RobCo_Eyebot</pawnKind>
                            <weight>2</weight>
                        </li>
                    </options>
                </li>
            </mechGroups>
        </value>
    </Operation>
    <!-- Patch MechanitorShip questContentRules -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/QuestScriptDef[defName="MechanitorShip"]/questContentRules/rulesStrings/li[contains(text(),
			'mechanitorShuttleCrashedLetterLabel->')]</xpath>
        <value>
            <li>mechanitorShuttleCrashedLetterLabel->Vertibot crash site</li>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/QuestScriptDef[defName="MechanitorShip"]/questContentRules/rulesStrings/li[contains(text(),
			'mechanitorShuttleCrashedLetterText->')]</xpath>
        <value>
            <li>mechanitorShuttleCrashedLetterText->A Vertibot containing rogue RobCo robots has crashed nearby. The robots will exit the wreck and prepare to fight.</li>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/QuestScriptDef[defName="MechanitorShip"]/questContentRules/rulesStrings/li[contains(text(),
			'assaultBeginLetterLabel->')]</xpath>
        <value>
            <li>assaultBeginLetterLabel->RobCo robot attack</li>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/QuestScriptDef[defName="MechanitorShip"]/questContentRules/rulesStrings/li[contains(text(),
			'assaultBeginLetterText->')]</xpath>
        <value>
            <li>assaultBeginLetterText->The rogue RobCo robots are coming to assault the colony!</li>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/QuestScriptDef[defName="MechanitorShip"]/questContentRules/rulesStrings/li[contains(text(),
			"mechlinkAvailableLetterLabel->")]</xpath>
        <value>
            <li>mechlinkAvailableLetterLabel->[mechanitor_nameDef]'s Pipboy available</li>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/QuestScriptDef[defName="MechanitorShip"]/questContentRules/rulesStrings/li[contains(text(),
			"mechlinkAvailableLetterText->")]</xpath>
        <value>
            <li>mechlinkAvailableLetterText->The crashed Vertibot contained the corpse of an ancient RobCo mechanitor. Extract [mechanitor_possessive] Pipboy by selecting a colonist and right-clicking the corpse.</li>
        </value>
    </Operation>

    <!-- Raid spawn changes -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/FactionDef[defName="Mechanoid"]/pawnGroupMakers</xpath>
        <value>
            <pawnGroupMakers>
                <li>
                    <!-- All types-->
                    <kindDef>Combat</kindDef>
                    <commonality>100</commonality>
                    <options>
                    <RobCo_MisterGutsy>20</RobCo_MisterGutsy> <!-- Ex scyther -->
                    <RobCo_Protectron>20</RobCo_Protectron> <!-- Ex Pikeman-->
                    <RobCo_Assaultron>2</RobCo_Assaultron> <!-- Ex Lancer (/5 and duplicated over the 3 variant of assaultron )-->
                    <RobCo_Assaultron_Invader>2</RobCo_Assaultron_Invader>
                    <RobCo_Assaultron_Dominator>2</RobCo_Assaultron_Dominator> 
                    <RobCo_SentrybotAnnihilator>10</RobCo_SentrybotAnnihilator> <!-- CentipedeBlaster -->
                    <RobCo_SentrybotPestcontrol>5</RobCo_SentrybotPestcontrol> <!-- Scorcher -->
                    <RobCo_EyebotDuraframe>40</RobCo_EyebotDuraframe> <!-- Militor -->
                    <RobCo_Robobrain>2</RobCo_Robobrain> <!-- Centurion -->
                    <RobCo_AssaultronSheepsquatch>1</RobCo_AssaultronSheepsquatch> <!-- Warqueen-->
                    <RobCo_SentrybotDeathbot>1</RobCo_SentrybotDeathbot> <!-- Apocriton -->
                    </options>
                </li>
                <li>
                    <!-- Sentry only -->
                    <kindDef>Combat</kindDef>
                    <commonality>30</commonality>
                    <options>
                    <RobCo_SentrybotAnnihilator>10</RobCo_SentrybotAnnihilator>
                    <RobCo_SentrybotSiegebreaker>5</RobCo_SentrybotSiegebreaker>
                    <RobCo_SentrybotPestcontrol>5</RobCo_SentrybotPestcontrol>
                    </options>
                </li>
                <li MayRequire="Ludeon.RimWorld.Biotech">
                    <!-- Eyebot only -->
                    <kindDef>Combat</kindDef>
                    <commonality>30</commonality>
                    <options>
                    <RobCo_EyebotDuraframe>10</RobCo_EyebotDuraframe>
                    </options>
                </li>
                <li>
                    <!-- breach raids -->
                    <kindDef>Combat</kindDef>
                    <commonality>1</commonality>
                    <options>
                    <RobCo_Protectron>10</RobCo_Protectron>
                    <RobCo_MisterGutsy>10</RobCo_MisterGutsy>
                    <RobCo_Assaultron>5</RobCo_Assaultron>
                    <RobCo_Assaultron_Invader>3</RobCo_Assaultron_Invader>
                    <RobCo_Assaultron_Dominator>2</RobCo_Assaultron_Dominator>
                    <RobCo_SentrybotAnnihilator>10</RobCo_SentrybotAnnihilator>
                    <RobCo_SentrybotSiegebreaker>1</RobCo_SentrybotSiegebreaker>
                    <RobCo_EyebotDuraframe>20</RobCo_EyebotDuraframe>
                    </options>
                </li>
            </pawnGroupMakers>
        </value>
    </Operation>
    
    <!-- Ancient gestator building change -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="AncientMechGestatorTank"]/comps/li[@Class="CompProperties_MechGestatorTank"]/triggeredMessage</xpath>
        <value>
            <triggeredMessage>A {0_labelShort} has emerged from a Robco charging bot.</triggeredMessage>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="AncientMechGestatorTank"]/comps/li[@Class="CompProperties_MechGestatorTank"]/mechKindOptions</xpath>
        <value>
            <mechKindOptions>
                <RobCo_MisterGutsy />
                <RobCo_Assaultron />
                <RobCo_Protectron />
                <RobCo_SentrybotAnnihilator />
                <RobCo_Robobrain />
            </mechKindOptions>
        </value>
    </Operation>

    <!-- Mech capsule changes (found in mech cluster) -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="MechCapsule"]/comps/li[@Class="CompProperties_PawnSpawnOnWakeup"]/spawnablePawnKinds</xpath>
        <value>
            <spawnablePawnKinds>
                <li>RobCo_MisterGutsy</li>
                <li>RobCo_Assaultron</li>
                <li>RobCo_Protectron</li>
                <li>RobCo_SentrybotAnnihilator</li>
            </spawnablePawnKinds>
        </value>
    </Operation>

    <!-- Mech Assembler changes (found in mech cluster, craft robot) -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="MechAssembler"]/comps/li[@Class="CompProperties_SpawnerPawn"]/spawnablePawnKinds</xpath>
        <value>
            <spawnablePawnKinds>
                <li>RobCo_MisterGutsy</li>
                <li>RobCo_Assaultron</li>
                <li>RobCo_Protectron</li>
                <li>RobCo_SentrybotAnnihilator</li>
            </spawnablePawnKinds>
        </value>
    </Operation>

    
    <!-- Mech Drop beacon changes (Called by mech clusters) -->
    <Operation Class="PatchOperationReplace">
        <xpath>/Defs/ThingDef[defName="MechDropBeacon"]/comps/li[@Class="CompProperties_PawnSpawnOnWakeup"]/spawnablePawnKinds</xpath>
        <value>
            <spawnablePawnKinds>
                <li>RobCo_MisterGutsy</li>
                <li>RobCo_Assaultron</li>
                <li>RobCo_Protectron</li>
                <li>RobCo_SentrybotAnnihilator</li>
            </spawnablePawnKinds>
        </value>
    </Operation>
</Patch>